<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no"/>
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <title>1x1px</title>
    <link rel="stylesheet" href="css/styles.1.0.1.css">
    <script src="js/lib/indexeddb.js"></script>
    <script src="js/lib/wif.js"></script>
    <script src="js/lib/buffer.6.0.3.js"></script>
    <script src="js/lib/tapscript.1.1.2.js"></script>
    <script src="js/lib/crypto-utils.1.5.11.js"></script>
    <script src="js/lib/bech32.2.0.0.js"></script>
    <script src="js/lib/qrcode.js"></script>
    <style>
        .image-grid {
            display: grid;
            grid-template-columns: repeat(20, 40px);
            grid-template-rows: repeat(2, 40px);
            grid-gap: 0;
            width: 800px;
            margin: 0 auto;
        }

        .image-box {
            display: block;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            border: none;
        }

        .outer-container {
            width: 100%;
        }
    </style>

</head>
<body>



<div class="app-wrapper">
    <div class="outer-container">
        <div class="image-grid" id="container"></div>
    </div>
    <h1>1x1px</h1>
    <h6 style="margin-top: -15px;">
        Experimental Bitcoin Ordinals based colored coins community inscription tool.
        Join
        our <a href="https://discord.gg/SSwWBKua" target="_blank">Discord</a>.
    </h6>
    <h2 class="safari_warning">This tool may not work in safari browser. If you are using that, consider switching.</h2>
    <div id="setup">
        <div>

        <div class="mb-3">
            <label for="taproot_address">&gt;&gt; Receiving address <span class="type_of_address">(taproot)</span></label>
            <input id="taproot_address" class="address"
                   placeholder="Enter a taproot address from an ordinals wallet">
        </div>

        <p>&gt;&gt; Please choose a color for your 1x1px:</p>

        <div class="container mt-5">
            <div class="form-group">
              <label for="colorPicker">Choose a color:</label>
              <input type="color" id="colorPicker" class="form-control">
            </div>
            <button id="downloadButton" class="btn btn-primary" onclick="downloadPixel()">Download Pixel</button>
          </div>
        </div>
        <br>

        <form id="app-form">

            <div class="file_form option_form">
                <input
                        accept=".json,
                            .pdf,
                            .asc,
                            .yaml,
                            .yml,
                            .flac,
                            .mp3,
                            .wav,
                            .apng,
                            .avif,
                            .gif,
                            .jpg,
                            .jpeg,
                            .png,
                            .svg,
                            .webp,
                            .glb,
                            .stl,
                            .html,
                            .txt,
                            .mp4,
                            .webm
                            " type="file" class="form" multiple>

                <button style="margin-top: 15px;" id="bytes_checker" type="button">
                    Check if file is already inscribed
                </button>
            </div>

            


            <span class="timer">61</span>

            <p>&gt;&gt; Select a feerate (sats/vB)</p>
            <div class="feerates">
                <div class="fee minfee">
                    <div style="color: white;" class="num rounded">...</div>
                    <div class="name">Min</div>
                </div>
                <div class="fee midfee">
                    <div style="color: white;" class="num rounded">...</div>
                    <div class="name">Mid</div>
                </div>
                <div class="fee maxfee">
                    <div style="color: white;" class="num rounded">...</div>
                    <div class="name">Max</div>
                </div>
            </div>
            <div style="margin-top: 15px;" id="sliderange">
                <label for="sats_range">sats/vB: <span id="sats_per_byte">1</span></label>
                <input class="form-range" id="sats_range" type="range" min="1" max="100" value="1">
            </div>
        </form>

        <hr/>

        <div><label><span style="margin-right: 10px;">ðŸ”§</span> Options</label></div>

        <div>
            <label style="display: inline-block" for="padding"><span
                    style="margin-left: 10px; margin-right: 16px;">â‚¿</span>
                Sats in inscription (Max Supply of your colored coin)</label>
            <input style="width: 20%" id="padding" type="text" value=""/>
        </div>
        <div>
            <label style="display: inline-block;" for="cpfp"><span style="margin-right: 6px;">ðŸš€</span> Enable
                CPFP</label>
            <input style="display: inline-block; height: 0.9rem; width:unset" id="cpfp" type="checkbox" value="1"
                   checked="checked"/>
        </div>

        <div id="backup" style="margin-top: 0px; margin-bottom: 10px;">
            <div><span style="margin-right: 6px;">ðŸš‘</span> <a id="backup-usage" href="javascript:void(0);">Backup
                Usage</a>
                <span id="db-quota"></span></div>
            <div id="backup-recovery"
                 style="border: 1px solid white; padding: 10px; display:none; margin-top: 15px; margin-bottom: 15px; max-height: 500px; overflow-x: auto"></div>
            <div id="backup-list" style="display:none; margin-top: 15px; max-height: 500px; overflow-x: auto"></div>
        </div>

        <div id="tipping" style="display: inline-block;">
            <label for="tip" style="display: inline-block;margin-bottom: 0"><span style="margin-right: 6px;">ðŸ’–</span>
                Developer Tip</label>
            <input id="tip" style="width: 100px; margin-bottom:0; " type="text" value="1000" disabled/> sats ($<span
                id="tip-usd">0</span>)
        </div>

        <hr/>

    </div>

    <div style="margin-top: 20px; margin-bottom: 20px;">
        <button class="submit btn btn-primary">Inscribe!</button>
        <button class="estimate btn btn-primary">Estimate Fees</button>
        <span id="estimated-fees"></span>
        <button style="display:none;" class="startover btn btn-primary">Reset</button>
    </div>

    <div class="display"></div>
    <div style="display: none;" class="file"></div>

    <div class="black-bg" onclick="modalVanish();"></div>
    <div class="modal">
        <span id="descendants-warning" style="display:none;color:red;margin-bottom: 20px;font-size: 13px;">For the remaining inscriptions, please wait for the parent transaction to confirm. Do NOT close this window.</span>
        <div class="modal-content text-truncate"></div>
        <button id="modal-reset" class="btn btn-primary" style="margin-top: 15px; display: none;"
                onclick="location.reload();">Reset
        </button>
    </div>
    <hr style="margin-top: 30px;"/>
    <div style="text-align: center;font-size: 14px;">
        The inscription tool is a fork of <a style="font-size: 14px;" href="https://inscribetheplanet.com" target="_blank">Inscribe
        the planet</a> (<a style="font-size: 14px;" href="https://github.com/BennyTheDev/inscriptions-online"
                           target="_blank">Github</a>)
    </div>
    <div style="text-align: center;font-size: 14px;">
        Features and experiences between forks might differ.
    </div>

</div>

<script src="js/app/app-config.1.0.7.js"></script>
<script src="js/app/inscriptions/plugins.1.0.2.js"></script>
<script src="js/app/inscriptions/inscriptions.1.0.10.js"></script>

<script>
    function downloadPixel() {
      const canvas = document.createElement('canvas');
      canvas.width = 1;
      canvas.height = 1;
      const context = canvas.getContext('2d');
      context.fillStyle = document.getElementById('colorPicker').value;
      context.fillRect(0, 0, 1, 1);

      const dataURL = canvas.toDataURL('image/png');
      const downloadLink = document.createElement('a');
      downloadLink.download = 'pixel.png';
      downloadLink.href = dataURL;
      document.body.appendChild(downloadLink);
      downloadLink.click();
      document.body.removeChild(downloadLink);
    }
  </script>
   <script>
    async function fetchJSON() {
        const response = await fetch('file.json');
        const data = await response.json();
        return data;
    }

    function createImageGrid(data) {
        const container = document.getElementById('container');
        data.slice(0, 40).forEach(item => {
            const imageBox = document.createElement('a');
            imageBox.href = `https://ordinals.com/inscription/${item.ordinalid}`;
            imageBox.target = "_blank";
            imageBox.classList.add('image-box');
            imageBox.style.backgroundColor = `rgb(${item.rgb})`;

            container.appendChild(imageBox);
        });
    }

    fetchJSON().then(data => {
        createImageGrid(data);
    });
</script>

</body>
</html>
